{"version":3,"sources":["webpack:///src/components/remoteSelect.vue","webpack:///./src/components/remoteSelect.vue?97bc","webpack:///./src/components/remoteSelect.vue","webpack:///src/App.vue","webpack:///./src/App.vue?64cc","webpack:///./src/App.vue","webpack:///./src/main.js","webpack:///./src/directives/index.js"],"names":["remoteSelect","data","pageIndex","pageSize","value","pageLimit","pageMap","list","methods","handleScroll","param","el","middlePosition","_list","this","length","shift","splice","scrollTop","push","apply","toConsumableArray_default","ajaxData","pop","concat","i","name","id","created","components_remoteSelect","render","_vm","_h","$createElement","_c","_self","staticClass","_v","_s","directives","rawName","expression","model","callback","$$v","_l","item","key","attrs","staticRenderFns","App","components","RemoteSelect","__webpack_require__","normalizeComponent","ssrContext","selectortype_template_index_0_src_App","src_App","App_normalizeComponent","Vue","use","directive","bind","binding","SCROLL_DOM","querySelector","scrollPosition","addEventListener","flagToDirection","LIMIT_BOTTOM","scrollHeight","scrollBottom","clientHeight","Option","Select","config","productionTip","template"],"mappings":"iKAWAA,GACAC,KADA,WAEA,OACAC,UAAA,EACAC,SAAA,IACAC,MAAA,GACAC,UAAA,EACAC,WACAC,UAGAC,SAQAC,aARA,SAQAC,EAAAC,EAAAC,GACA,GAAAF,EAAA,KAAAG,EACAC,KAAAR,QAAAS,QAAAD,KAAAT,YAGAS,KAAAR,QAAAU,QAEAF,KAAAP,KAAAU,OAAA,EAAAH,KAAAX,UAEAQ,EAAAO,UAAAN,KAEAE,KAAAZ,UACAY,KAAAR,QAAAa,KAAAL,KAAAZ,YAEAW,EAAAC,KAAAP,MAAAY,KAAAC,MAAAP,EAAAQ,IAAAP,KAAAQ,SAAAR,KAAAZ,iBAEA,CAEA,KAAAY,KAAAR,QAAA,MAcA,SAZAQ,KAAAZ,UAAAY,KAAAR,QAAA,KAGAQ,KAAAR,QAAAiB,MAEAT,KAAAR,SAAAQ,KAAAZ,WAAAsB,OAAAH,IAAAP,KAAAR,UAEAQ,KAAAP,KAAAU,QAAAH,KAAAX,SAAAW,KAAAX,UAEAW,KAAAP,QAAAiB,OAAAH,IAAAP,KAAAQ,SAAAR,KAAAZ,YAAAmB,IAAAP,KAAAP,OAEAI,EAAAO,UAAAN,IAUAU,SAjDA,SAiDApB,GAIA,IAFA,IACAK,KACAkB,EAFA,KAEAvB,EAAA,GAAAuB,EAFA,IAEAvB,EAAAuB,IACAlB,EAAAY,MACAO,KAAA,eAAAD,EACAE,GAAAF,IAGA,OAAAlB,IAGAqB,QAzEA,WA2EAd,KAAAP,KAAAO,KAAAQ,SAAAR,KAAAZ,WAEAY,KAAAR,QAAAa,KAAAL,KAAAZ,aCrFe2B,GADEC,OAFjB,WAA0B,IAAAC,EAAAjB,KAAakB,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,WAAqBF,EAAA,MAAAH,EAAAM,GAAA,QAAAN,EAAAO,GAAAP,EAAAxB,KAAAQ,WAAAgB,EAAAM,GAAA,KAAAH,EAAA,MAAAH,EAAAM,GAAA,OAAAN,EAAAO,GAAAP,EAAAzB,YAAAyB,EAAAM,GAAA,KAAAH,EAAA,aAA2IK,aAAab,KAAA,SAAAc,QAAA,WAAApC,MAAA2B,EAAA,aAAAU,WAAA,iBAAoFL,YAAA,eAAAM,OAAoCtC,MAAA2B,EAAA,MAAAY,SAAA,SAAAC,GAA2Cb,EAAA3B,MAAAwC,GAAcH,WAAA,UAAqBV,EAAAc,GAAAd,EAAA,cAAAe,GAAkC,OAAAZ,EAAA,aAAuBa,IAAAD,EAAAnB,GAAAqB,OAAmB5C,MAAA0C,EAAAnB,MAAiBI,EAAAM,GAAAN,EAAAO,GAAAQ,EAAApB,aAA8B,IAEvkBuB,oBCCjB,ICKAC,GACAxB,KAAA,MACAyB,YAAAC,aDPyBC,EAAQ,OAcjCC,CACEtD,EACA6B,GATF,EAVA,SAAA0B,GACEF,EAAQ,SAaV,KAEA,MAUgC,UEvBjBG,GADE1B,OAFP,WAAgB,IAAaE,EAAblB,KAAamB,eAA0BC,EAAvCpB,KAAuCqB,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBc,OAAOrB,GAAA,SAAYO,EAAA,sBAE7Fe,oBCChC,IAuBeQ,EAvBUJ,EAAQ,OAcjBK,CACdR,EACAM,GAT6B,EAV/B,SAAoBD,GAClBF,EAAQ,SAaS,KAEU,MAUG,8BCnBhCM,UAAIC,ICNW,WACbD,UAAIE,UAAU,UACZC,KADsB,SAChBnD,EAAIoD,GAER,IAAIC,EAAarD,EAAGsD,cAAc,iDAC9BC,EAAiB,EACrBF,EAAWG,iBAAiB,SAAU,WAGpC,IAAIC,EAAkBtD,KAAKI,UAAYgD,EAAiB,EAExDA,EAAiBpD,KAAKI,UACtB,IAAMmD,EAAevD,KAAKwD,aAAe,IAErCC,EAAezD,KAAKwD,cAAgBxD,KAAKI,UAAYJ,KAAK0D,cAAgBH,EAE1ED,GAAmBG,GAErBR,EAAQ3D,MAAMgE,EAAiBJ,EAAYlD,KAAKwD,aAAe,IAG5DF,GAAmBtD,KAAKI,UAAYmD,GACvCN,EAAQ3D,MAAMgE,EAAiBJ,EAAYlD,KAAKwD,aAAe,UDfzEX,UAAIC,IAAIa,UACRd,UAAIC,IAAIc,UACRf,UAAIgB,OAAOC,eAAgB,EAG3B,IAAIjB,WACFhD,GAAI,OACJwC,YAAcD,OACd2B,SAAU","file":"static/js/app.4b5386aa4b0d7d88cb3a.js","sourcesContent":["<template>\n  <div class=\"remote\">\n    <h6>数据长度：{{list.length}}</h6>\n    <h6>页码表：{{pageMap}}</h6>\n    <el-select class=\"remoteSelect\" v-scroll=\"handleScroll\" v-model=\"value\">\n      <el-option :value=\"item.id\" v-for=\"item in list\" :key=\"item.id\">{{item.name}}</el-option>\n    </el-select>\n  </div>\n</template>\n\n<script type=\"text/ecmascript-6\">\nexport default {\n  data () {\n    return {\n      pageIndex: 1, // 分页中请求的页面\n      pageSize: 100, // 自定义  每页的大小\n      value: '', // select绑定的实体\n      pageLimit: 4, // 需维护数组的长度\n      pageMap: [], // 对应数组长度的页码表\n      list: [] // 下列列表的数据，接口获取\n    }\n  },\n  methods: {\n    /*********************************\n      ** Fn: handleScroll\n      ** Intro: 处理滚动行为\n      ** @params: param 为true代表向下滚动 为false代表向上滚动\n      ** @params: el 滚动DOM\n      ** @params: middlePosition 滚动列表的中间位置\n    *********************************/\n    handleScroll (param, el, middlePosition) {\n      if (param) {\n        if (this.pageMap.length >= this.pageLimit) {\n          // 当长度相等的时候， 绝对不能超出长度  则有进必有出\n          // 删除 pageMap 列表的第一个元素\n          this.pageMap.shift()\n          // 对应删除list中一页的数据量\n          this.list.splice(0, this.pageSize)\n          // 回滚到中间位置\n          el.scrollTop = middlePosition\n        }\n        ++this.pageIndex\n        this.pageMap.push(this.pageIndex)\n        // 请求下一页的数据\n        this.list.push(...this.ajaxData(this.pageIndex))\n        // 同步记录页码\n      } else {\n        // 如果在向上滚动时，如果还没有到达第一页则继续加载。 如果已到达则停止加载\n        if (this.pageMap[0] > 1) {\n          // 向上滚动，取出pageMap中第一个元素值减1\n          this.pageIndex = this.pageMap[0] - 1\n          // 同步设置分页\n          // ①先删除最后一个元素\n          this.pageMap.pop()\n          // ②将新元素添加在头部\n          this.pageMap = [this.pageIndex, ...this.pageMap]\n          // ①删除list中最后一页的数据\n          this.list.splice(-this.pageSize, this.pageSize)\n          // ②将新数据添加在头部位置\n          this.list = [...this.ajaxData(this.pageIndex), ...this.list]\n          // 回滚到中间位置\n          el.scrollTop = middlePosition\n        } else return false\n      }\n    },\n    /*********************************\n      ** Fn: ajaxData\n      ** Intro: 模拟ajax请求数据,每次返回100条数据\n      ** @params:  pageIndex 代表请求的页码\n      ** Author: zyx\n    *********************************/\n    ajaxData (pageIndex) {\n      // 每页数量\n      let pageSize = 100\n      let list = []\n      for (let i = pageSize * (pageIndex - 1); i < pageSize * pageIndex; i++) {\n        list.push({\n          name: `这是一条测试数据 代号：${i}`,\n          id: i\n        })\n      }\n      return list\n    }\n  },\n  created () {\n    // 模拟ajax请求，初始加载第一页数据\n    this.list = this.ajaxData(this.pageIndex)\n    // 第一加载同步记录页码\n    this.pageMap.push(this.pageIndex)\n  }\n}\n</script>\n<style lang='stylus' rel='stylesheet/stylus'>\n  .remote\n      text-align center\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/remoteSelect.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"remote\"},[_c('h6',[_vm._v(\"数据长度：\"+_vm._s(_vm.list.length))]),_vm._v(\" \"),_c('h6',[_vm._v(\"页码表：\"+_vm._s(_vm.pageMap))]),_vm._v(\" \"),_c('el-select',{directives:[{name:\"scroll\",rawName:\"v-scroll\",value:(_vm.handleScroll),expression:\"handleScroll\"}],staticClass:\"remoteSelect\",model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}},_vm._l((_vm.list),function(item){return _c('el-option',{key:item.id,attrs:{\"value\":item.id}},[_vm._v(_vm._s(item.name))])}))],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-7ec0b2e7\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/remoteSelect.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-7ec0b2e7\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./remoteSelect.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./remoteSelect.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./remoteSelect.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7ec0b2e7\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./remoteSelect.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/remoteSelect.vue\n// module id = null\n// module chunks = ","<template>\n  <div id=\"app\">\n    <remote-select></remote-select>\n  </div>\n</template>\n\n<script>\nimport RemoteSelect from './components/remoteSelect'\nexport default {\n  name: 'App',\n  components: {RemoteSelect}\n}\n</script>\n\n<style>\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('remote-select')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-52a90e90\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-52a90e90\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-52a90e90\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport App from './App'\nimport {Select, Option} from 'element-ui'\nimport 'element-ui/lib/theme-chalk/index.css'\nimport Directives from './directives'\nVue.use(Directives)\nVue.use(Option)\nVue.use(Select)\nVue.config.productionTip = false\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  components: { App },\n  template: '<App/>'\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","import Vue from 'vue'\nexport default () => {\n  Vue.directive('scroll', {\n    bind (el, binding) {\n      // 获取滚动页面DOM\n      let SCROLL_DOM = el.querySelector('.el-select-dropdown .el-select-dropdown__wrap')\n      let scrollPosition = 0\n      SCROLL_DOM.addEventListener('scroll', function () {\n        // 当前的滚动位置 减去  上一次的滚动位置\n        // 如果为true则代表向上滚动，false代表向下滚动\n        let flagToDirection = this.scrollTop - scrollPosition > 0\n        // 记录当前的滚动位置\n        scrollPosition = this.scrollTop\n        const LIMIT_BOTTOM = this.scrollHeight / 4.2\n        // 记录滚动位置距离底部的位置\n        let scrollBottom = this.scrollHeight - (this.scrollTop + this.clientHeight) < LIMIT_BOTTOM\n        // 如果向下滚动 并且距离底部只有100px\n        if (flagToDirection && scrollBottom) {\n          // 将滚动行为告诉组件\n          binding.value(flagToDirection, SCROLL_DOM, this.scrollHeight / 2)\n        }\n        // 如果是向上滚动  并且距离顶部只有100px\n        if (!flagToDirection && this.scrollTop < LIMIT_BOTTOM) {\n          binding.value(flagToDirection, SCROLL_DOM, this.scrollHeight / 2)\n        }\n      })\n    }\n  })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/directives/index.js"],"sourceRoot":""}